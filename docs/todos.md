# TODOs

- [⏳] S3 offsite backup migration: nuke Glacier objects and re-sync to Intelligent-Tiering (~2h ETA)
- [⏳] Disable and prune ZFS snapshots on `hdd/backups-vm` to reclaim ~4.4 TB (PBS already has versioning)
- [ ] Create disaster recovery runbook (ZFS rollback, PBS restore, S3 recovery procedures)
- [ ] Prepare repo for open source
  - [ ] Add pre-commit hooks for secret detection
    - [ ] Create `.pre-commit-config.yaml` with gitleaks and custom SOPS checks
    - [ ] Add `.gitleaks.toml` for custom rules
  - [ ] Update SOPS workflow to never decrypt in place
    - [ ] Add `sops:edit` task (decrypts to /tmp, re-encrypts on save)
    - [ ] Add `sops:view` task (stdout only)
    - [ ] Add `sops:get` task (single value extraction)
    - [ ] Deprecate `sops:decrypt` / `sops:encrypt` in-place tasks
  - [ ] Add `.sops.yaml` config file to document encryption expectations
  - [ ] Update README with new SOPS workflow
- [ ] Add manually-imported Grafana dashboards to Ansible provisioning (Access Point, Disk Health, DNS, HAProxy, Hosts, IoT, ntfy, Postfix, PBS, Proxmox Cluster, qBittorrent, Reverse Proxy, Synapse, UPS)
- [ ] Apply for AWS SES production access
- [ ] Create architecture diagrams
  - [ ] Network topology (physical, VLANs, firewall zones, traffic flows)
  - [ ] Compute layout (hosts → VMs/LXCs, resources, storage backends)
  - [ ] Storage architecture (ZFS pools, NFS/SMB exports, performance vs capacity tiers)
  - [ ] Backup flow (ZFS snapshots → PBS → S3 Glacier pipeline)
  - [ ] External access path (Cloudflare → AWS → Tailscale → home)
- [ ] Setup iGPU passthrough on Trinity for Media Stack (Jellyfin hardware transcoding)
- [ ] Add TTS/STT inference to GPU Workstation
- [ ] Integrate Matter/Thread border router into IoT stack
- [ ] Deploy wasmCloud LXC
- [ ] Refactor public gateway as "Soren"
  - [ ] Rename to Soren in docs, Ansible, Tailscale
  - [ ] Upgrade Lightsail to micro ($5/mo)
  - [ ] Add Uptime Kuma for external monitoring
  - [ ] Make host_monitoring_agent role OS-generic (Debian + Amazon Linux)
- [ ] Rewrite dev workstation to NixOS
