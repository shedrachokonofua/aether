---
- name: Bootstrap SeaweedFS LXC (run on Proxmox host)
  hosts: smith
  gather_facts: false
  vars:
    lxc_id: "{{ vm.seaweedfs.id }}"
  tasks:
    - name: Install openssh-server and python3 in LXC
      command: pct exec {{ lxc_id }} -- dnf install -y openssh-server python3
      register: pkg_install
      changed_when: "'Nothing to do' not in pkg_install.stdout"

    - name: Enable and start sshd in LXC
      command: pct exec {{ lxc_id }} -- systemctl enable --now sshd
      changed_when: true
